
# 쿠버네티스 소개

## 쿠버네티스란 무엇인가?
쿠버네티스(Kubernetes)는 오픈소스 시스템으로, 컨테이너화된 애플리케이션의 배포, 확장, 관리 등을 자동화합니다. 이는 쿠버네티스가 여러 호스트(즉, 여러 대의 원격 머신)에 걸쳐 컨테이너화된 애플리케이션을 배포하는 데 도움을 주는 도구, 서비스, 개념들의 모음이라는 것을 의미합니다.

쿠버네티스는 복잡한 컨테이너화된 애플리케이션의 배포 및 구성을 단순화하며, 확장성 및 로드 밸런싱과 같은 주제에 대해서도 도움을 줍니다. 예를 들어, AWS ECS와 같은 서비스도 이와 비슷한 기능을 제공하지만, AWS 고유의 규칙, 구문 및 논리를 따라야 하므로 어느 정도 "잠금(lock-in)"이 발생할 수 있습니다. 만약 다른 제공자나 호스트로 전환하고 싶다면 모든 배포 구성을 변환해야 할 수도 있습니다.

하지만 쿠버네티스를 사용하면 쿠버네티스의 규칙과 개념을 따르는 구성을 설정할 수 있으며, 이 구성은 쿠버네티스를 지원하는 모든 호스트에서 작동합니다. 즉, 클라우드 제공자든 쿠버네티스가 설정된 자체 데이터 센터든 상관없이 동일하게 작동합니다.

## 쿠버네티스는 어떻게 작동하나요?
구체적인 예시는 다음 섹션에서 다루겠지만, 일반적으로 쿠버네티스 클러스터(쿠버네티스를 지원하도록 설정된 머신들의 네트워크)에 몇 가지 명령을 실행하여 컨테이너를 배포하고 시작할 수 있습니다.

보통 쿠버네티스 구성 파일을 작성하여 원하는 상태를 기술하고, 몇 가지 쿠버네티스 명령을 실행하여 해당 상태를 클러스터에 반영할 수 있습니다. 아래는 예시 구성 파일입니다(이해할 필요는 아직 없습니다. 나중에 자세히 다룰 것입니다):

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: users-deployment
spec:
  replicas: 2
  selector:
    matchLabels:
      app: users
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: users
        image: my-repo/users-application
```

## 왜 쿠버네티스를 사용해야 하나요?
프로젝트가 복잡해지고, 따라서 배포가 복잡해짐에 따라(여러 컨테이너, 확장, 로드 밸런싱 등) 원격 머신에서 모든 컨테이너를 수동으로 실행하고 모니터링하는 것을 원하지 않을 수 있습니다.

여러 가지 이유로 수동 관리가 어려울 수 있습니다. 자세한 내용은 "배포" 섹션을 참고하세요. 쿠버네티스는 복잡한 배포를 설정하고 구성하는 과정을 간단하게 만듭니다. 또한 자동으로 컨테이너를 모니터링하고 문제가 발생하면 다시 시작합니다. 확장 및 로드 밸런싱도 내장되어 있어 간단합니다.

여러 머신에 걸친 데이터 관리를 볼륨으로 쉽게 설정할 수 있으며, 그 외에도 다양한 기능이 포함되어 있습니다. 이러한 이유로 쿠버네티스를 사용하고자 할 수 있습니다.

앞서 언급한 것처럼, 다른 관리형 컨테이너 서비스(AWS ECS 등)를 사용할 수도 있지만 이 경우 어느 정도는 "잠금(lock-in)"이 발생할 수 있습니다. 하지만 쿠버네티스를 사용하면 오픈 소스 도구를 사용하게 되며, 쿠버네티스 구성을 지원하는 모든 머신과 제공자에서 사용할 수 있습니다.

## 쿠버네티스가 아닌 것들
쿠버네티스는 다음과 같은 것이 아님을 이해하는 것이 중요합니다:
- 클라우드 제공자
- 클라우드 제공자 서비스 (클라우드 제공자는 쿠버네티스 관련 서비스를 제공할 수 있음)
- 인프라 관리를 위한 도구 또는 서비스 (쿠버네티스는 머신을 생성하거나 실행하지 않음, 하지만 클라우드 제공자의 관리형 쿠버네티스 서비스는 이를 제공할 수 있음)
- 단일 도구 또는 소프트웨어 - 쿠버네티스는 개념과 도구들의 모음임

## 핵심 개념
쿠버네티스는 여러 개념과 도구들로 이루어져 있습니다.

구체적으로, 쿠버네티스 클러스터는 컨테이너를 실행하기 위해 필요합니다. 쿠버네티스 클러스터는 단순히 머신들의 네트워크입니다.

이 머신들은 쿠버네티스 세계에서 "노드(Node)"라고 불리며, 두 종류의 노드가 있습니다:
- 마스터 노드: "컨트롤 플레인(Control Plane)"을 호스팅하며, 배포된 리소스를 관리하는 제어 센터 역할을 합니다.
- 워커 노드: 실제로 컨테이너가 실행되는 머신들입니다.

### 마스터 노드는 다음과 같은 "도구" / 프로세스를 호스팅합니다:
- API 서버: 워커 노드와 통신하여 컨테이너를 실행하는 역할을 합니다.
- 스케줄러: 컨테이너를 관리하며, 어느 노드에 새로운 컨테이너를 실행할지 결정합니다.
- 기타 여러 프로세스가 있으며, 공식 문서를 참조하세요.

### 워커 노드에서는 다음과 같은 "도구" / 프로세스가 실행됩니다:
- kubelet 서비스: 마스터 노드 API 서버와의 상호작용을 담당하며, 컨트롤 플레인과 통신합니다.
- 컨테이너 런타임(예: Docker): 실제로 컨테이너를 실행하고 제어하는 역할을 합니다.
- kube-proxy 서비스: 컨테이너 및 클러스터 네트워크 통신 및 액세스를 담당합니다.

쿠버네티스 클러스터를 처음부터 직접 만들 경우, 이 모든 머신들을 생성하고, 해당 머신에 쿠버네티스 소프트웨어를 설치해야 합니다. 물론 권한 관리도 필요합니다.

리눅스와 서버 관리 경험이 많지 않다면, 이러한 과정을 직접 하기 어려울 수 있습니다. 다행히도 쿠버네티스 클러스터 생성을 단순화하는 도구 및 관리형 서비스가 있습니다(자세한 내용은 "쿠버네티스 배포" 섹션에서 다룹니다).

클러스터가 실행 중이면 쿠버네티스는 컨테이너를 생성하고, 실행하며, 중단하고, 관리합니다.

쿠버네티스는 이를 "파드(Pod)"라는 단위로 관리하며, 파드는 쿠버네티스에서 가장 작은 단위입니다.

파드는 하나 이상의 컨테이너(일반적으로 하나)를 포함하며, 컨테이너에 필요한 구성 및 볼륨도 포함합니다. 쿠버네티스를 사용할 때는 컨테이너가 아니라 파드를 관리하며, 파드가 컨테이너를 관리하게 됩니다. 이 부분에 대해서는 다음 섹션에서 더 자세히 다룹니다.

## 추가 자료
- 공식 웹사이트 및 문서: [Kubernetes 공식 문서](https://kubernetes.io/docs/home/)
