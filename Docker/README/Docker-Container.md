# 도커(Docker)와 컨테이너(Container)에 대한 정리

## 이미지(Images) & 컨테이너(Containers)

### 이미지(Images)
이미지는 도커의 두 가지 핵심 요소 중 하나입니다 (다른 하나는 **컨테이너**입니다).  
이미지는 컨테이너의 청사진/템플릿 역할을 하며, **읽기 전용** 상태입니다. 여기에는 애플리케이션뿐만 아니라 애플리케이션 실행에 필요한 **운영 체제, 런타임, 도구** 등이 포함됩니다.

이미지 자체는 실행되지 않으며, **컨테이너로 실행**될 수 있습니다. 이미지는 미리 빌드된 이미지를 사용할 수 있으며(예: DockerHub에서 제공하는 공식 이미지), **Dockerfile**을 통해 직접 이미지를 빌드할 수도 있습니다.

**Dockerfile**은 이미지 빌드 시 실행되는 명령어들을 포함하며, 각 명령어는 이미지에 레이어를 생성합니다. 이러한 레이어는 이미지를 효율적으로 재빌드하거나 공유하는 데 사용됩니다.

특히 **CMD** 명령어는 이미지 빌드 시 실행되는 것이 아니라, 해당 이미지를 기반으로 **컨테이너가 생성되고 시작될 때** 실행됩니다.

### 컨테이너(Containers)
컨테이너는 도커의 또 다른 핵심 요소입니다.  
컨테이너는 **이미지의 실행 인스턴스**입니다. `docker run` 명령어로 컨테이너를 생성하면, 이미지 위에 얇은 **읽기-쓰기 레이어**가 추가됩니다.

하나의 이미지로부터 여러 개의 컨테이너를 실행할 수 있으며, 모든 컨테이너는 **독립적으로 실행**되며, 애플리케이션 상태나 데이터는 공유되지 않습니다.

애플리케이션을 실행하려면 반드시 **컨테이너를 생성하고 시작**해야 합니다. 따라서 개발 및 운영 환경에서 실제로 실행되는 것은 **컨테이너**입니다.

---

## 주요 도커 명령어

전체 명령어 목록을 보려면 명령어 뒤에 `--help`를 추가하세요 (예: `docker --help`, `docker run --help`).  
또한 [공식 문서](https://docs.docker.com/engine/reference/run/)에서 모든 명령어와 기능에 대한 자세한 문서를 확인할 수 있습니다. 하지만 모든 기능과 명령어를 사용할 필요는 없으며, 실제로는 일부분만 필요합니다.

### 이미지 관련 명령어
- `docker build .` : Dockerfile을 빌드하여 이미지 생성
  - `-t NAME:TAG` : 이미지에 이름과 태그를 할당
- `docker images` : 로컬에 저장된 모든 이미지를 리스트로 표시
- `docker rmi IMAGE` : 이미지 이름 또는 ID로 이미지 삭제
- `docker image prune` : 사용되지 않는 이미지 제거 (untagged 이미지)
  - `-a` : 로컬에 저장된 모든 이미지 제거
- `docker push IMAGE` : 이미지 이름/태그에 레지스트리 이름 또는 URL을 포함하여 이미지를 DockerHub(또는 다른 레지스트리)로 푸시
- `docker pull IMAGE` : DockerHub(또는 다른 레지스트리)에서 이미지 다운로드 (이미지 미존재 시 자동 실행)

### 컨테이너 관련 명령어
- `docker run IMAGE_NAME` : 해당 이미지를 기반으로 새 컨테이너 생성 및 시작
  - `--name NAME` : 컨테이너에 이름을 할당 (중지, 삭제 등에 사용)
  - `-d` : 백그라운드에서 실행 (출력은 보이지 않음)
  - `-it` : 인터랙티브 모드로 실행 (터미널에서 입력을 받을 준비가 됨). `CTRL + C`로 중지 가능
  - `--rm` : 컨테이너 중지 시 자동 삭제
- `docker ps` : 실행 중인 모든 컨테이너 리스트 표시
  - `-a` : 중지된 컨테이너 포함 모든 컨테이너 리스트 표시
- `docker rm CONTAINER` : 컨테이너 이름 또는 ID로 컨테이너 삭제
- `docker container prune` : 중지된 모든 컨테이너 삭제
